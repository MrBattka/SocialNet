(this["webpackJsonpfirst-react"]=this["webpackJsonpfirst-react"]||[]).push([[0],{12:function(e,t,a){e.exports={wrapper:"MyPost_wrapper__2I8HV",textarea:"MyPost_textarea__3Rgef",btn__wrapper:"MyPost_btn__wrapper__3UdOx",btn:"MyPost_btn__1njIl"}},13:function(e,t,a){e.exports={header__wrapper:"Header_header__wrapper__1O_TU",header:"Header_header__iLGU8",logo:"Header_logo__2j3ml",logo__text:"Header_logo__text__2uBvm",login__block:"Header_login__block__5zf50"}},16:function(e,t,a){e.exports=a.p+"static/media/user.8c62dd08.jpg"},18:function(e,t,a){e.exports={profile__img:"ProfileInfo_profile__img__2S6Ag",profile__wrapper:"ProfileInfo_profile__wrapper__1QPwh",profile__info:"ProfileInfo_profile__info__1kDVH",about__user:"ProfileInfo_about__user__1BB0O",userName:"ProfileInfo_userName__33fEJ"}},22:function(e,t,a){e.exports={head__img:"Profile_head__img__2Hw8h"}},23:function(e,t,a){e.exports={wrapper:"Posts_wrapper__3qGWR",avatar:"Posts_avatar__3MPfR",text:"Posts_text__3nSJk"}},41:function(e,t,a){e.exports=a.p+"static/media/preloader.ef886190.svg"},42:function(e,t,a){e.exports={loader:"Preloader_loader__aA5wi"}},45:function(e,t,a){e.exports=a(79)},46:function(e,t,a){},47:function(e,t,a){},6:function(e,t,a){e.exports={wrapper__messages:"Messages_wrapper__messages__3wpWW",stick:"Messages_stick__LngQ1",title:"Messages_title__3qInT",dialogs:"Messages_dialogs__3qFZt",dialog:"Messages_dialog__3sjgR",flexbox:"Messages_flexbox__3NCYH",wrapper__messanger:"Messages_wrapper__messanger__1Wboq",message:"Messages_message__2zDQy",textMessage:"Messages_textMessage__2uaSf",btn:"Messages_btn__3DTSB",btnSend:"Messages_btnSend__2ji_v"}},7:function(e,t,a){e.exports={nav:"Nav_nav__1_JSp",settings:"Nav_settings__1K9ZG",line:"Nav_line__1F-rl",link:"Nav_link__2pFvk",active:"Nav_active__33sVg"}},79:function(e,t,a){"use strict";a.r(t);a(46);var n=a(26),r=a(2),s={userId:null,email:null,login:null,isAuth:!1},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AUTH_USER_DATA":return Object(r.a)(Object(r.a)(Object(r.a)({},e),t.data),{},{isAuth:!0});default:return e}},o=a(17),i={dialogs:[{id:1,name:"Nick 1"},{id:2,name:"Nick 2"},{id:3,name:"Nick 3"},{id:4,name:"Nick 4"},{id:5,name:"Nick 5"}],messages:[{message:"Hi, world"}],newMessageText:""};window.initialState=i;var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND-MESSAGE":var a={id:1,message:e.newMessageText};return Object(r.a)(Object(r.a)({},e),{},{messages:[].concat(Object(o.a)(e.messages),[a])});case"UPDATE-NEW-MESSAGE-TEXT":case"RESET_NEW_MESSAGE_TEXT":return Object(r.a)(Object(r.a)({},e),{},{newMessageText:t.newText});default:return e}},u={posts:[],newPostText:"",profile:null,isFetching:!0},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":var a={id:1,message:e.newPostText};return Object(r.a)(Object(r.a)({},e),{},{posts:[].concat(Object(o.a)(e.posts),[a])});case"UPDATE-NEW-POST-TEXT":case"RESET_NEW_POST_TEXT":return Object(r.a)(Object(r.a)({},e),{},{newPostText:t.newText});case"SET_USER_PROFILE":return Object(r.a)(Object(r.a)({},e),{},{profile:t.profile});default:return e}},m={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(r.a)(Object(r.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(r.a)(Object(r.a)({},e),{},{followed:!0}):e}))});case"UNFOLLOW":return Object(r.a)(Object(r.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(r.a)(Object(r.a)({},e),{},{followed:!1}):e}))});case"SET_USERS":return Object(r.a)(Object(r.a)({},e),{},{users:t.users});case"SET_CURRENT_PAGE":return Object(r.a)(Object(r.a)({},e),{},{currentPage:t.currentPage});case"SET_TOTAL_USERS_COUNT":return Object(r.a)(Object(r.a)({},e),{},{totalUsersCount:t.count});case"TOGGLE_IS_FETCHING":return Object(r.a)(Object(r.a)({},e),{},{isFetching:t.isFetching});case"TOGGLE_IS_FOLLOWING_PROGRESS":return Object(r.a)(Object(r.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(o.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!=t.userId}))});default:return e}},g=Object(n.a)({profilePage:_,dialogsPage:c,usersPage:p,auth:l}),f=Object(n.b)(g);window.store=f;var d=f,E=(a(47),a(0)),v=a.n(E),w=a(9),h=a(7),b=a.n(h);var N=function(){return v.a.createElement("nav",{className:b.a.nav},v.a.createElement("div",{className:b.a.link},v.a.createElement(w.b,{className:function(e){return e.isActive?b.a.active:b.a.item},to:"/profile/2"},"Profile")),v.a.createElement("div",{className:b.a.link},v.a.createElement(w.b,{className:function(e){return e.isActive?b.a.active:b.a.item},to:"/messages"},"Messages")),v.a.createElement("div",{className:b.a.link},v.a.createElement(w.b,{className:function(e){return e.isActive?b.a.active:b.a.item},to:"/users"},"Users")),v.a.createElement("div",{className:b.a.link},v.a.createElement("a",{className:b.a.item,href:"#"},"Music")),v.a.createElement("div",{className:b.a.line}),v.a.createElement("div",{className:b.a.link},v.a.createElement("a",{className:b.a.settings,href:"#"},"Settings")))},P=a(10),T=a(6),O=a.n(T),S=function(e){var t="/messages/"+e.id;return v.a.createElement("div",{className:O.a.dialog+" "+O.a.active},v.a.createElement(w.b,{to:t},e.name))},U=function(e){return v.a.createElement("div",{className:O.a.message},e.message)},x=function(e){var t=v.a.createRef(),a=function(){if(0==e.newMessageText)return!1;e.sendMessage()},n=e.dialogs.map((function(e){return v.a.createElement(S,{name:e.name,key:e.id,id:e.id})})),r=e.messages.map((function(e){return v.a.createElement(U,{message:e.message,key:e.id})}));return v.a.createElement("div",{className:O.a.wrapper__messages},v.a.createElement("h2",{className:O.a.title},"Dialogs"),v.a.createElement("div",{className:O.a.dialogs},n),v.a.createElement("span",{className:O.a.stick}),v.a.createElement("div",{className:O.a.flexbox},v.a.createElement("div",{className:O.a.wrapper__messanger},v.a.createElement("div",{className:O.a.messanger},r))),v.a.createElement("div",{className:O.a.textMessage},v.a.createElement("textarea",{ref:t,onChange:function(){var n=t.current.value;t.current.addEventListener("keydown",(function(e){13===e.keyCode&&(e.preventDefault(),a())}),{once:!0}),e.updateNewMessageText(n)},value:e.newMessageText,autoFocus:!0})),v.a.createElement("div",{className:O.a.btn},v.a.createElement("div",{className:O.a.btnSend},v.a.createElement("button",{onClick:a},"Send"))))},j=Object(P.b)((function(e){return{dialogs:e.dialogsPage.dialogs,messages:e.dialogsPage.messages,newMessageText:e.dialogsPage.newMessageText}}),(function(e){return{sendMessage:function(){e({type:"SEND-MESSAGE"}),e({type:"RESET_NEW_MESSAGE_TEXT",newText:""})},updateNewMessageText:function(t){e(function(e){return{type:"UPDATE-NEW-MESSAGE-TEXT",newText:e}}(t))}}}))(x),I=a(38),k=a(39),M=a(44),F=a(43),y=a(8),C=a.n(y),A=a(16),R=a.n(A),L=a(40).create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"a1b446b4-e455-44b0-aac9-6513133be227"}}),G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return L.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},D=function(e){return L.post("follow/".concat(e.id)).then((function(e){return e.data}))},W=function(e){return L.delete("follow/".concat(e.id)).then((function(e){return e.data}))},H=function(e){return L.get("profile/".concat(e)).then((function(e){return e.data}))},z=function(){return L.get("auth/me").then((function(e){return e.data}))},X=function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),a=[],n=1;n<=t&&!(n>20);n++)a.push(n);return v.a.createElement("div",null,v.a.createElement("a",{name:"top"}),e.users.map((function(t){return v.a.createElement("div",{className:C.a.wrapper,key:t.id},v.a.createElement("div",{className:C.a.wrapper__avatar},v.a.createElement("div",null,v.a.createElement(w.b,{to:"/profile/"+t.id},v.a.createElement("img",{className:C.a.avatar,src:null!=t.photos.small?t.photos.small:R.a}))),v.a.createElement("div",{className:C.a.btn__wrapper},t.followed?v.a.createElement("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),className:C.a.btn__unfollow,onClick:function(){e.toggleFollowingProgress(!0,t.id),W(t).then((function(a){0==a.resultCode&&e.unfollow(t.id),e.toggleFollowingProgress(!1,t.id)}))}},"Unfollow"):v.a.createElement("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),className:C.a.btn__follow,onClick:function(){e.toggleFollowingProgress(!0,t.id),D(t).then((function(a){0==a.resultCode&&e.follow(t.id),e.toggleFollowingProgress(!1,t.id)}))}},"Follow"))),v.a.createElement("div",{className:C.a.wrapper__info},v.a.createElement("div",null,v.a.createElement("div",{className:C.a.nickName},t.name),v.a.createElement("div",{className:C.a.status},t.status)),v.a.createElement("div",{className:C.a.location},v.a.createElement("div",null,"USA",","),v.a.createElement("div",null,"New York"))))})),v.a.createElement("div",{className:C.a.numberPage},a.map((function(t){return v.a.createElement("div",{onClick:function(a){e.onPageChanged(t)},key:t.id},v.a.createElement("button",{className:e.currentPage===t?C.a.selectedPage:""},v.a.createElement("a",{href:"#top"},t)))}))))},B=a(41),J=a.n(B),q=a(42),Q=a.n(q),Z=function(e){return v.a.createElement("div",{className:Q.a.loader},v.a.createElement("img",{src:J.a}))},K=function(e){Object(M.a)(a,e);var t=Object(F.a)(a);function a(){var e;Object(I.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).onPageChanged=function(t){e.props.setCurrentPage(t),e.props.toggleIsFetching(!0),G(t,e.props.pageSize).then((function(t){e.props.toggleIsFetching(!1),e.props.setUsers(t.items),e.props.setTotalUsersCount(t.totalCount)}))},e}return Object(k.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.toggleIsFetching(!0),G(this.props.currentPage,this.props.pageSize).then((function(t){e.props.toggleIsFetching(!1),e.props.setUsers(t.items),e.props.setTotalUsersCount(t.totalCount)}))}},{key:"render",value:function(){return v.a.createElement(v.a.Fragment,null,v.a.createElement("span",{className:C.a.users},"Users:"),this.props.isFetching?v.a.createElement(Z,null):v.a.createElement(X,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,users:this.props.users,unfollow:this.props.unfollow,follow:this.props.follow,onPageChanged:this.onPageChanged,currentPage:this.props.currentPage,toggleFollowingProgress:this.props.toggleFollowingProgress,followingInProgress:this.props.followingInProgress}))}}]),a}(v.a.Component),V=Object(P.b)((function(e){return{users:e.usersPage.users,pageSize:e.usersPage.pageSize,totalUsersCount:e.usersPage.totalUsersCount,currentPage:e.usersPage.currentPage,isFetching:e.usersPage.isFetching,followingInProgress:e.usersPage.followingInProgress}}),{follow:function(e){return{type:"FOLLOW",userId:e}},unfollow:function(e){return{type:"UNFOLLOW",userId:e}},setUsers:function(e){return{type:"SET_USERS",users:e}},setCurrentPage:function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},setTotalUsersCount:function(e){return{type:"SET_TOTAL_USERS_COUNT",count:e}},toggleIsFetching:function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},toggleFollowingProgress:function(e,t){return{type:"TOGGLE_IS_FOLLOWING_PROGRESS",isFetching:e,userId:t}}})(K),Y=a(1),$=a(22),ee=a.n($),te=a(18),ae=a.n(te),ne=function(){return v.a.createElement("div",null,"'Lorem ipsum dolor sit amet consectetur adipisicing elit. Fugiat deleniti ipsam veritatis.'")};var re=function(e){return e.profile?v.a.createElement("div",{className:ae.a.profile__wrapper},v.a.createElement("div",null,v.a.createElement("img",{className:ae.a.profile__img,src:null!=e.profile.photos.large?e.profile.photos.large:R.a})),v.a.createElement("div",{className:ae.a.profile__info},v.a.createElement("div",{className:ae.a.userName},e.profile.fullName),v.a.createElement("div",{className:ae.a.about__user},null!=e.profile.aboutMe?e.profile.aboutMe:v.a.createElement(ne,null)))):v.a.createElement(Z,null)},se=a(12),le=a.n(se),oe=a(23),ie=a.n(oe);var ce=function(e){return v.a.createElement("div",null,v.a.createElement("div",{className:ie.a.wrapper},v.a.createElement("div",{className:ie.a.avatar},v.a.createElement("img",{src:null!=e.profile.photos.small?e.profile.photos.small:R.a})),v.a.createElement("div",{className:ie.a.text},e.post)))};var ue=function(e){var t=v.a.createRef(),a=function(){if(0==e.newPostText)return!1;e.addPost()},n=e.posts.map((function(t){return v.a.createElement(ce,{post:t.message,profile:e.profile,key:t.profile})}));return v.a.createElement("div",{className:le.a.wrapper},v.a.createElement("div",{className:le.a.textarea__wrapper},v.a.createElement("textarea",{className:le.a.textarea,onChange:function(){var n=t.current.value;t.current.addEventListener("keydown",(function(e){13===e.keyCode&&(e.preventDefault(),a())}),{once:!0}),e.updateNewPostText(n)},ref:t,value:e.newPostText})),v.a.createElement("div",{className:le.a.btn__wrapper},v.a.createElement("button",{className:le.a.btn,onClick:a,type:"submit"},"Post")),v.a.createElement("h2",null,"Posts:"),v.a.createElement("div",{className:le.a.Posts},e.isFetching?n:v.a.createElement(Z,null)))},_e=Object(P.b)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText,profile:e.profilePage.profile,isFetching:e.profilePage.isFetching}}),(function(e){return{addPost:function(){e({type:"ADD-POST"}),e({type:"RESET_NEW_POST_TEXT",newText:""})},updateNewPostText:function(t){e(function(e){return{type:"UPDATE-NEW-POST-TEXT",newText:e}}(t))}}}))(ue),me=function(e){return v.a.createElement("div",{className:ee.a.content},v.a.createElement("div",null,v.a.createElement("img",{className:ee.a.head__img,src:"https://catherineasquithgallery.com/uploads/posts/2021-02/1613162821_148-p-zheltii-fon-minimalizm-224.jpg"})),v.a.createElement("div",{className:ee.a.profile__wrapper},v.a.createElement(re,{profile:e.profile}),v.a.createElement(_e,{profile:e.profile})))},pe=Object(P.b)((function(e){return{profile:e.profilePage.profile}}),{setUserProfile:function(e){return{type:"SET_USER_PROFILE",profile:e}}})((function(e){var t=Object(Y.g)().userId;return Object(E.useEffect)((function(){H(t).then((function(t){e.setUserProfile(t)}))}),[]),v.a.createElement(me,Object.assign({},e,{profile:e.profile}))})),ge=a(13),fe=a.n(ge);var de=function(e){return v.a.createElement("header",{className:fe.a.header__wrapper},v.a.createElement("div",{className:fe.a.header},v.a.createElement("div",{className:fe.a.logo},v.a.createElement("p",null,"Social \xb7"),v.a.createElement("p",{className:fe.a.logo__text},"\xb7 NET")),v.a.createElement("div",{className:fe.a.login__block},v.a.createElement("p",{className:fe.a.login},e.isAuth?e.login:v.a.createElement(w.b,{to:"/login"},"Login")))))},Ee=Object(P.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{setAuthUserData:function(e,t,a){return{type:"SET_AUTH_USER_DATA",data:{userId:e,email:t,login:a}}}})((function(e){return Object(E.useEffect)((function(){z().then((function(t){if(0===t.resultCode){var a=t.data,n=a.id,r=a.email,s=a.login;e.setAuthUserData(n,r,s)}}))}),[]),v.a.createElement(de,e)}));var ve=function(e){return v.a.createElement(v.a.Fragment,null,v.a.createElement("div",{className:"app-wrapper"},v.a.createElement(Ee,null),v.a.createElement(N,null),v.a.createElement("div",{className:"app-wrapper-content"},v.a.createElement(Y.c,null,v.a.createElement(Y.a,{path:"profile/:userId/",element:v.a.createElement(pe,null)}),v.a.createElement(Y.a,{path:"/messages/*",element:v.a.createElement(j,null)}),v.a.createElement(Y.a,{path:"/users",element:v.a.createElement(V,null)})))))},we=a(21);a.n(we).a.render(v.a.createElement(w.a,null,v.a.createElement(P.a,{store:d},v.a.createElement(ve,null))),document.getElementById("root"))},8:function(e,t,a){e.exports={wrapper:"Users_wrapper__me3Re",users:"Users_users__34yhM",btn__wrapper:"Users_btn__wrapper__3n4D-",btn__unfollow:"Users_btn__unfollow__14Z8o",btn__follow:"Users_btn__follow__yMUfQ",btn__follow__click:"Users_btn__follow__click__1zRZt",wrapper__avatar:"Users_wrapper__avatar__28eI8",wrapper__info:"Users_wrapper__info__SEIFs",avatar:"Users_avatar__2b-dr",nickName:"Users_nickName__1wKLu",status:"Users_status__3yRiB",location:"Users_location__2Tc5o",item:"Users_item__1fNW8",selectedPage:"Users_selectedPage__2ESJ6",numberPage:"Users_numberPage__NkMil"}}},[[45,1,2]]]);
//# sourceMappingURL=main.a804afed.chunk.js.map