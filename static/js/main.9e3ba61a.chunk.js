(this["webpackJsonpfirst-react"]=this["webpackJsonpfirst-react"]||[]).push([[0],{10:function(e,t,a){e.exports={nav:"Nav_nav__1_JSp",settings:"Nav_settings__1K9ZG",line:"Nav_line__1F-rl",link:"Nav_link__2pFvk",active:"Nav_active__33sVg"}},13:function(e,t,a){e.exports={wrapper:"MyPost_wrapper__2I8HV",textarea:"MyPost_textarea__3Rgef",btn__wrapper:"MyPost_btn__wrapper__3UdOx",btn:"MyPost_btn__1njIl"}},14:function(e,t,a){e.exports={header__wrapper:"Header_header__wrapper__1O_TU",header:"Header_header__iLGU8",logo:"Header_logo__2j3ml",logo__text:"Header_logo__text__2uBvm",login__block:"Header_login__block__5zf50"}},17:function(e,t,a){e.exports=a.p+"static/media/user.8c62dd08.jpg"},19:function(e,t,a){e.exports={profile__img:"ProfileInfo_profile__img__1FqeS",profile__wrapper:"ProfileInfo_profile__wrapper__ryhAY",profile__info:"ProfileInfo_profile__info__PlW92",about__user:"ProfileInfo_about__user__2g9SG",userName:"ProfileInfo_userName__3gBbn"}},27:function(e,t,a){e.exports={wrapper:"Posts_wrapper__3qGWR",avatar:"Posts_avatar__3MPfR",text:"Posts_text__3nSJk"}},30:function(e,t,a){},44:function(e,t,a){e.exports=a.p+"static/media/preloader.ef886190.svg"},45:function(e,t,a){e.exports={loader:"Preloader_loader__aA5wi"}},46:function(e,t,a){e.exports={aboutMe__editor:"ProfileStatus_aboutMe__editor__1BhQl"}},47:function(e,t,a){e.exports=a(81)},48:function(e,t,a){},5:function(e,t,a){e.exports={DialogItem__link:"Messages_DialogItem__link__375Kj",wrapper__messages:"Messages_wrapper__messages__3wpWW",stick:"Messages_stick__LngQ1",title:"Messages_title__3qInT",dialogs:"Messages_dialogs__3qFZt",dialog:"Messages_dialog__3sjgR",flexbox:"Messages_flexbox__3NCYH",wrapper__messanger:"Messages_wrapper__messanger__1Wboq",message:"Messages_message__2zDQy",textMessage:"Messages_textMessage__2uaSf",btn:"Messages_btn__3DTSB",btnSend:"Messages_btnSend__2ji_v"}},73:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);a(48);var n=a(11),r=a(2),s=a(41).create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"a1b446b4-e455-44b0-aac9-6513133be227"}}),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return s.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},i=function(e){return s.post("follow/".concat(e.id)).then((function(e){return e.data}))},o=function(e){return s.delete("follow/".concat(e.id)).then((function(e){return e.data}))},c=function(e){return s.get("profile/".concat(e)).then((function(e){return e.data}))},u=function(){return s.get("auth/me").then((function(e){return e.data}))},_={userId:null,email:null,login:null,isAuth:!1},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AUTH_USER_DATA":return Object(r.a)(Object(r.a)(Object(r.a)({},e),t.data),{},{isAuth:!0});default:return e}},p=a(18),f={dialogs:[{id:1,name:"Nick 1"},{id:2,name:"Nick 2"},{id:3,name:"Nick 3"},{id:4,name:"Nick 4"},{id:5,name:"Nick 5"}],messages:[{message:"Hi, world"}],newMessageText:""};window.initialState=f;var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND-MESSAGE":var a={id:1,message:e.newMessageText};return Object(r.a)(Object(r.a)({},e),{},{messages:[].concat(Object(p.a)(e.messages),[a])});case"UPDATE-NEW-MESSAGE-TEXT":case"RESET_NEW_MESSAGE_TEXT":return Object(r.a)(Object(r.a)({},e),{},{newMessageText:t.newText});default:return e}},g={posts:[],newPostText:"",profile:null,isFetching:!0},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":var a={id:1,message:e.newPostText};return Object(r.a)(Object(r.a)({},e),{},{posts:[].concat(Object(p.a)(e.posts),[a])});case"UPDATE-NEW-POST-TEXT":case"RESET_NEW_POST_TEXT":return Object(r.a)(Object(r.a)({},e),{},{newPostText:t.newText});case"SET_USER_PROFILE":return Object(r.a)(Object(r.a)({},e),{},{profile:t.profile});default:return e}},v={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},b=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},h=function(e,t){return{type:"TOGGLE_IS_FOLLOWING_PROGRESS",isFetching:e,userId:t}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(r.a)(Object(r.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(r.a)(Object(r.a)({},e),{},{followed:!0}):e}))});case"UNFOLLOW":return Object(r.a)(Object(r.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(r.a)(Object(r.a)({},e),{},{followed:!1}):e}))});case"SET_USERS":return Object(r.a)(Object(r.a)({},e),{},{users:t.users});case"SET_CURRENT_PAGE":return Object(r.a)(Object(r.a)({},e),{},{currentPage:t.currentPage});case"SET_TOTAL_USERS_COUNT":return Object(r.a)(Object(r.a)({},e),{},{totalUsersCount:t.count});case"TOGGLE_IS_FETCHING":return Object(r.a)(Object(r.a)({},e),{},{isFetching:t.isFetching});case"TOGGLE_IS_FOLLOWING_PROGRESS":return Object(r.a)(Object(r.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(p.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!=t.userId}))});default:return e}},N=a(42),P=Object(n.b)({profilePage:E,dialogsPage:d,usersPage:w,auth:m}),O=Object(n.d)(P,Object(n.a)(N.a));window.store=O;var T=O,S=(a(73),a(0)),j=a.n(S),x=a(4),M=a(10),k=a.n(M);var U=function(){return j.a.createElement("nav",{className:k.a.nav},j.a.createElement("div",{className:k.a.link},j.a.createElement(x.b,{className:function(e){return e.isActive?k.a.active:k.a.item},to:"/profile/2"},"Profile")),j.a.createElement("div",{className:k.a.link},j.a.createElement(x.b,{className:function(e){return e.isActive?k.a.active:k.a.item},to:"/messages"},"Messages")),j.a.createElement("div",{className:k.a.link},j.a.createElement(x.b,{className:function(e){return e.isActive?k.a.active:k.a.item},to:"/users"},"Users")),j.a.createElement("div",{className:k.a.link},j.a.createElement("a",{className:k.a.item,href:"#"},"Music")),j.a.createElement("div",{className:k.a.line}),j.a.createElement("div",{className:k.a.link},j.a.createElement("a",{className:k.a.settings,href:"#"},"Settings")))},y=a(6),I=a(1),A=function(e){return Object(y.b)((function(e){return{isAuth:e.auth.isAuth}}))((function(t){return t.isAuth?j.a.createElement(e,t):j.a.createElement(I.a,{replace:!0,to:"/login"})}))},F=a(5),C=a.n(F),R=function(e){var t="/messages/"+e.id;return j.a.createElement("div",{className:C.a.dialog+" "+C.a.active},j.a.createElement(x.b,{className:C.a.DialogItem__link,to:t},e.name))},L=function(e){return j.a.createElement("div",{className:C.a.message},e.message)},G=function(e){var t=j.a.createRef(),a=function(){if(!e.newMessageText)return!1;e.sendMessage()},n=e.dialogs.map((function(e){return j.a.createElement(R,{name:e.name,key:e.id,id:e.id})})),r=e.messages.map((function(e){return j.a.createElement(L,{message:e.message,key:e.id})}));return j.a.createElement("div",{className:C.a.wrapper__messages},j.a.createElement("h2",{className:C.a.title},"Dialogs"),j.a.createElement("div",{className:C.a.dialogs},n),j.a.createElement("span",{className:C.a.stick}),j.a.createElement("div",{className:C.a.flexbox},j.a.createElement("div",{className:C.a.wrapper__messanger},j.a.createElement("div",{className:C.a.messanger},r))),j.a.createElement("div",{className:C.a.textMessage},j.a.createElement("textarea",{ref:t,onChange:function(){var n=t.current.value;t.current.addEventListener("keydown",(function(e){13===e.keyCode&&(e.preventDefault(),a())}),{once:!0}),e.updateNewMessageText(n)},value:e.newMessageText,autoFocus:!0})),j.a.createElement("div",{className:C.a.btn},j.a.createElement("div",{className:C.a.btnSend},j.a.createElement("button",{onClick:a},"Send"))))},D=Object(n.c)(Object(y.b)((function(e){return{dialogs:e.dialogsPage.dialogs,messages:e.dialogsPage.messages,newMessageText:e.dialogsPage.newMessageText}}),(function(e){return{sendMessage:function(){e({type:"SEND-MESSAGE"}),e({type:"RESET_NEW_MESSAGE_TEXT",newText:""})},updateNewMessageText:function(t){e(function(e){return{type:"UPDATE-NEW-MESSAGE-TEXT",newText:e}}(t))}}})),A)(G),W=a(23),H=a(24),z=a(26),X=a(25),B=a(9),q=a.n(B),J=a(17),Y=a.n(J),K=function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),a=[],n=1;n<=t&&!(n>20);n++)a.push(n);return j.a.createElement("div",null,j.a.createElement("a",{name:"top"}),e.users.map((function(t){return j.a.createElement("div",{className:q.a.wrapper,key:t.id},j.a.createElement("div",{className:q.a.wrapper__avatar},j.a.createElement("div",null,j.a.createElement(x.b,{to:"/profile/"+t.id},j.a.createElement("img",{className:q.a.avatar,src:null!=t.photos.small?t.photos.small:Y.a}))),j.a.createElement("div",{className:q.a.btn__wrapper},t.followed?j.a.createElement("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),className:q.a.btn__unfollow,onClick:function(){e.unfollow(t)}},"Unfollow"):j.a.createElement("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),className:q.a.btn__follow,onClick:function(){e.follow(t)}},"Follow"))),j.a.createElement("div",{className:q.a.wrapper__info},j.a.createElement("div",null,j.a.createElement("div",{className:q.a.nickName},j.a.createElement(x.b,{to:"/profile/"+t.id,className:q.a.userName__link},t.name)),j.a.createElement("div",{className:q.a.status},t.status)),j.a.createElement("div",{className:q.a.location},j.a.createElement("div",null,"USA",","),j.a.createElement("div",null,"New York"))))})),j.a.createElement("div",{className:q.a.numberPage},a.map((function(t){return j.a.createElement("div",{onClick:function(a){e.onPageChanged(t)},key:t.id},j.a.createElement("button",{className:e.currentPage===t?q.a.selectedPage:""},j.a.createElement("a",{href:"#top"},t)))}))))},Q=a(44),Z=a.n(Q),V=a(45),$=a.n(V),ee=function(e){return j.a.createElement("div",{className:$.a.loader},j.a.createElement("img",{src:Z.a}))},te=function(e){Object(z.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(W.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).onPageChanged=function(){e.props.getUsers(e.props.currentPage,e.props.pageNumber)},e}return Object(H.a)(a,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return j.a.createElement(j.a.Fragment,null,j.a.createElement("span",{className:q.a.users},"Users:"),this.props.isFetching?j.a.createElement(ee,null):j.a.createElement(K,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,users:this.props.users,unfollow:this.props.unfollow,follow:this.props.follow,onPageChanged:this.onPageChanged,currentPage:this.props.currentPage,followingInProgress:this.props.followingInProgress}))}}]),a}(j.a.Component),ae=Object(n.c)(Object(y.b)((function(e){return{users:e.usersPage.users,pageSize:e.usersPage.pageSize,totalUsersCount:e.usersPage.totalUsersCount,currentPage:e.usersPage.currentPage,isFetching:e.usersPage.isFetching,followingInProgress:e.usersPage.followingInProgress}}),{setCurrentPage:function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},toggleFollowingProgress:h,getUsers:function(e,t){return function(a){a(b(!0)),l(e,t).then((function(e){a(b(!1)),a({type:"SET_USERS",users:e.items}),a({type:"SET_TOTAL_USERS_COUNT",count:e.totalCount})}))}},follow:function(e){return function(t){t(h(!0,e.id)),i(e).then((function(a){0==a.resultCode&&t(function(e){return{type:"FOLLOW",userId:e}}(e.id)),t(h(!1,e.id))}))}},unfollow:function(e){return function(t){t(h(!0,e.id)),o(e).then((function(a){0==a.resultCode&&t(function(e){return{type:"UNFOLLOW",userId:e}}(e.id)),t(h(!1,e.id))}))}}}),A)(te),ne=a(30),re=a.n(ne),se=a(19),le=a.n(se),ie=function(){return j.a.createElement("div",null,"'Lorem ipsum dolor sit amet consectetur adipisicing elit. Fugiat deleniti ipsam veritatis.'")},oe=a(46),ce=a.n(oe),ue=function(e){Object(z.a)(a,e);var t=Object(X.a)(a);function a(){var e;Object(W.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={editMode:!1},e}return Object(H.a)(a,[{key:"activateEditMode",value:function(){this.setState({editMode:!0})}},{key:"deactivateEditeMode",value:function(){this.setState({editMode:!1})}},{key:"render",value:function(){return j.a.createElement("div",null,!this.state.editMode&&j.a.createElement("div",null,j.a.createElement("span",{className:ce.a.aboutMe__editor,onClick:this.activateEditMode.bind(this)},this.props.profile.aboutMe)),this.state.editMode&&j.a.createElement("div",null,j.a.createElement("input",{autoFocus:!0,onBlur:this.deactivateEditeMode.bind(this),defaultValue:this.props.profile.aboutMe,type:"text"})))}}]),a}(j.a.Component);var _e=function(e){return e.profile?j.a.createElement("div",{className:le.a.profile__wrapper},j.a.createElement("div",null,j.a.createElement("img",{className:le.a.profile__img,src:null!=e.profile.photos.large?e.profile.photos.large:Y.a})),j.a.createElement("div",{className:le.a.profile__info},j.a.createElement("div",{className:le.a.userName},e.profile.fullName),j.a.createElement("div",{className:le.a.about__user},null!=j.a.createElement(ue,null)?j.a.createElement(ue,{profile:e.profile}):j.a.createElement(ie,null)))):j.a.createElement(ee,null)},me=a(13),pe=a.n(me),fe=a(27),de=a.n(fe);var ge=function(e){return j.a.createElement("div",null,j.a.createElement("div",{className:de.a.wrapper},j.a.createElement("div",{className:de.a.avatar},j.a.createElement("img",{src:null!=e.profile.photos.small?e.profile.photos.small:Y.a})),j.a.createElement("div",{className:de.a.text},e.post)))};var Ee=function(e){var t=j.a.createRef(),a=function(){if(!e.newPostText)return!1;e.addPost()},n=e.posts.map((function(t){return j.a.createElement(ge,{post:t.message,profile:e.profile,key:t.profile})}));return j.a.createElement("div",{className:pe.a.wrapper},j.a.createElement("div",{className:pe.a.textarea__wrapper},j.a.createElement("textarea",{className:pe.a.textarea,onChange:function(){var n=t.current.value;t.current.addEventListener("keydown",(function(e){13===e.keyCode&&(e.preventDefault(),a())}),{once:!0}),e.updateNewPostText(n)},ref:t,value:e.newPostText})),j.a.createElement("div",{className:pe.a.btn__wrapper},j.a.createElement("button",{className:pe.a.btn,onClick:a,type:"submit"},"Post")),j.a.createElement("h2",null,"Posts:"),j.a.createElement("div",{className:pe.a.Posts},e.isFetching?n:j.a.createElement(ee,null)))},ve=Object(y.b)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText,profile:e.profilePage.profile,isFetching:e.profilePage.isFetching}}),(function(e){return{addPost:function(){e({type:"ADD-POST"}),e({type:"RESET_NEW_POST_TEXT",newText:""})},updateNewPostText:function(t){e(function(e){return{type:"UPDATE-NEW-POST-TEXT",newText:e}}(t))}}}))(Ee),be=function(e){return j.a.createElement("div",{className:re.a.content},j.a.createElement("div",{className:re.a.profile__wrapper},j.a.createElement(_e,{profile:e.profile}),j.a.createElement(ve,{profile:e.profile})))},he=Object(n.c)(Object(y.b)((function(e){return{profile:e.profilePage.profile}}),{getProfile:function(e){return function(t){c(e).then((function(e){t({type:"SET_USER_PROFILE",profile:e})}))}}}),A)((function(e){var t=Object(I.h)().userId;return Object(S.useEffect)((function(){e.getProfile(t)}),[]),j.a.createElement(be,Object.assign({},e,{profile:e.profile}))})),we=a(14),Ne=a.n(we);var Pe=function(e){return j.a.createElement("header",{className:Ne.a.header__wrapper},j.a.createElement("div",{className:Ne.a.header},j.a.createElement("div",{className:Ne.a.logo},j.a.createElement("p",null,"Social \xb7"),j.a.createElement("p",{className:Ne.a.logo__text},"\xb7 NET")),j.a.createElement("div",{className:Ne.a.login__block},j.a.createElement("p",{className:Ne.a.login},e.isAuth?e.login:j.a.createElement(x.b,{to:"/login"},"Login")))))},Oe=Object(y.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{auth:function(){return function(e){u().then((function(t){if(0===t.resultCode){var a=t.data,n=a.id,r=a.email,s=a.login;e(function(e,t,a){return{type:"SET_AUTH_USER_DATA",data:{userId:e,email:t,login:a}}}(n,r,s))}}))}}})((function(e){return Object(S.useEffect)((function(){e.auth()}),[]),j.a.createElement(Pe,e)})),Te=function(e){return e.isAuth?j.a.createElement(I.a,{replace:!0,to:"/profile/2"}):j.a.createElement("div",null,j.a.createElement("p",null,"LOGIN"))},Se=Object(y.b)((function(e){return{isAuth:e.auth.isAuth,isFetching:e.usersPage.isFetching}}))(Te);var je=function(e){return j.a.createElement(j.a.Fragment,null,j.a.createElement("div",{className:"app-wrapper"},j.a.createElement(Oe,null),j.a.createElement(U,null),j.a.createElement("div",{className:"app-wrapper-content"},j.a.createElement(I.d,null,j.a.createElement(I.b,{path:"profile/:userId/",element:j.a.createElement(he,null)}),j.a.createElement(I.b,{path:"/messages/*",element:j.a.createElement(D,null)}),j.a.createElement(I.b,{path:"/users",element:j.a.createElement(ae,null)}),j.a.createElement(I.b,{path:"/login",element:j.a.createElement(Se,null)})))))},xe=a(22);a.n(xe).a.render(j.a.createElement(x.a,null,j.a.createElement(y.a,{store:T},j.a.createElement(je,null))),document.getElementById("root"))},9:function(e,t,a){e.exports={wrapper:"Users_wrapper__me3Re",users:"Users_users__34yhM",btn__wrapper:"Users_btn__wrapper__3n4D-",btn__unfollow:"Users_btn__unfollow__14Z8o",btn__follow:"Users_btn__follow__yMUfQ",btn__follow__click:"Users_btn__follow__click__1zRZt",wrapper__avatar:"Users_wrapper__avatar__28eI8",wrapper__info:"Users_wrapper__info__SEIFs",avatar:"Users_avatar__2b-dr",nickName:"Users_nickName__1wKLu",status:"Users_status__3yRiB",location:"Users_location__2Tc5o",item:"Users_item__1fNW8",selectedPage:"Users_selectedPage__2ESJ6",numberPage:"Users_numberPage__NkMil",userName__link:"Users_userName__link__3jYpR"}}},[[47,1,2]]]);
//# sourceMappingURL=main.9e3ba61a.chunk.js.map