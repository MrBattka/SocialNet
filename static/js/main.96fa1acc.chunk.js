(this["webpackJsonpfirst-react"]=this["webpackJsonpfirst-react"]||[]).push([[0],{12:function(e,a,t){e.exports={wrapper:"MyPost_wrapper__2I8HV",textarea:"MyPost_textarea__3Rgef",btn__wrapper:"MyPost_btn__wrapper__3UdOx",btn:"MyPost_btn__1njIl"}},13:function(e,a,t){e.exports={header__wrapper:"Header_header__wrapper__1O_TU",header:"Header_header__iLGU8",logo:"Header_logo__2j3ml",logo__text:"Header_logo__text__2uBvm",login__block:"Header_login__block__5zf50"}},16:function(e,a,t){e.exports=t.p+"static/media/user.8c62dd08.jpg"},18:function(e,a,t){e.exports={profile__img:"ProfileInfo_profile__img__2S6Ag",profile__wrapper:"ProfileInfo_profile__wrapper__1QPwh",profile__info:"ProfileInfo_profile__info__1kDVH",about__user:"ProfileInfo_about__user__1BB0O",userName:"ProfileInfo_userName__33fEJ"}},22:function(e,a,t){e.exports={head__img:"Profile_head__img__2Hw8h"}},23:function(e,a,t){e.exports={wrapper:"Posts_wrapper__3qGWR",avatar:"Posts_avatar__3MPfR",text:"Posts_text__3nSJk"}},42:function(e,a,t){e.exports=t.p+"static/media/preloader.ef886190.svg"},43:function(e,a,t){e.exports={loader:"Preloader_loader__aA5wi"}},46:function(e,a,t){e.exports=t(80)},47:function(e,a,t){},6:function(e,a,t){e.exports={wrapper__messages:"Messages_wrapper__messages__3wpWW",stick:"Messages_stick__LngQ1",title:"Messages_title__3qInT",dialogs:"Messages_dialogs__3qFZt",dialog:"Messages_dialog__3sjgR",flexbox:"Messages_flexbox__3NCYH",wrapper__messanger:"Messages_wrapper__messanger__1Wboq",message:"Messages_message__2zDQy",textMessage:"Messages_textMessage__2uaSf",btn:"Messages_btn__3DTSB",btnSend:"Messages_btnSend__2ji_v"}},7:function(e,a,t){e.exports={nav:"Nav_nav__1_JSp",settings:"Nav_settings__1K9ZG",line:"Nav_line__1F-rl",link:"Nav_link__2pFvk",active:"Nav_active__33sVg"}},72:function(e,a,t){},8:function(e,a,t){e.exports={wrapper:"Users_wrapper__me3Re",users:"Users_users__34yhM",btn__wrapper:"Users_btn__wrapper__3n4D-",btn__unfollow:"Users_btn__unfollow__14Z8o",btn__follow:"Users_btn__follow__yMUfQ",btn__follow__click:"Users_btn__follow__click__1zRZt",wrapper__avatar:"Users_wrapper__avatar__28eI8",wrapper__info:"Users_wrapper__info__SEIFs",avatar:"Users_avatar__2b-dr",nickName:"Users_nickName__1wKLu",status:"Users_status__3yRiB",location:"Users_location__2Tc5o",item:"Users_item__1fNW8",selectedPage:"Users_selectedPage__2ESJ6",numberPage:"Users_numberPage__NkMil"}},80:function(e,a,t){"use strict";t.r(a);t(47);var n=t(24),r=t(2),s=t(37).create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"a1b446b4-e455-44b0-aac9-6513133be227"}}),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return s.get("users?page=".concat(e,"&count=").concat(a)).then((function(e){return e.data}))},o=function(e){return s.post("follow/".concat(e.id)).then((function(e){return e.data}))},i=function(e){return s.delete("follow/".concat(e.id)).then((function(e){return e.data}))},c=function(e){return s.get("profile/".concat(e)).then((function(e){return e.data}))},u=function(){return s.get("auth/me").then((function(e){return e.data}))},_={userId:null,email:null,login:null,isAuth:!1},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_AUTH_USER_DATA":return Object(r.a)(Object(r.a)(Object(r.a)({},e),a.data),{},{isAuth:!0});default:return e}},p=t(17),f={dialogs:[{id:1,name:"Nick 1"},{id:2,name:"Nick 2"},{id:3,name:"Nick 3"},{id:4,name:"Nick 4"},{id:5,name:"Nick 5"}],messages:[{message:"Hi, world"}],newMessageText:""};window.initialState=f;var g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SEND-MESSAGE":var t={id:1,message:e.newMessageText};return Object(r.a)(Object(r.a)({},e),{},{messages:[].concat(Object(p.a)(e.messages),[t])});case"UPDATE-NEW-MESSAGE-TEXT":case"RESET_NEW_MESSAGE_TEXT":return Object(r.a)(Object(r.a)({},e),{},{newMessageText:a.newText});default:return e}},d={posts:[],newPostText:"",profile:null,isFetching:!0},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"ADD-POST":var t={id:1,message:e.newPostText};return Object(r.a)(Object(r.a)({},e),{},{posts:[].concat(Object(p.a)(e.posts),[t])});case"UPDATE-NEW-POST-TEXT":case"RESET_NEW_POST_TEXT":return Object(r.a)(Object(r.a)({},e),{},{newPostText:a.newText});case"SET_USER_PROFILE":return Object(r.a)(Object(r.a)({},e),{},{profile:a.profile});default:return e}},v={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},b=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},w=function(e,a){return{type:"TOGGLE_IS_FOLLOWING_PROGRESS",isFetching:e,userId:a}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"FOLLOW":return Object(r.a)(Object(r.a)({},e),{},{users:e.users.map((function(e){return e.id===a.userId?Object(r.a)(Object(r.a)({},e),{},{followed:!0}):e}))});case"UNFOLLOW":return Object(r.a)(Object(r.a)({},e),{},{users:e.users.map((function(e){return e.id===a.userId?Object(r.a)(Object(r.a)({},e),{},{followed:!1}):e}))});case"SET_USERS":return Object(r.a)(Object(r.a)({},e),{},{users:a.users});case"SET_CURRENT_PAGE":return Object(r.a)(Object(r.a)({},e),{},{currentPage:a.currentPage});case"SET_TOTAL_USERS_COUNT":return Object(r.a)(Object(r.a)({},e),{},{totalUsersCount:a.count});case"TOGGLE_IS_FETCHING":return Object(r.a)(Object(r.a)({},e),{},{isFetching:a.isFetching});case"TOGGLE_IS_FOLLOWING_PROGRESS":return Object(r.a)(Object(r.a)({},e),{},{followingInProgress:a.isFetching?[].concat(Object(p.a)(e.followingInProgress),[a.userId]):e.followingInProgress.filter((function(e){return e!=a.userId}))});default:return e}},h=t(38),P=Object(n.b)({profilePage:E,dialogsPage:g,usersPage:N,auth:m}),T=Object(n.c)(P,Object(n.a)(h.a));window.store=T;var O=T,S=(t(72),t(0)),x=t.n(S),j=t(9),U=t(7),k=t.n(U);var M=function(){return x.a.createElement("nav",{className:k.a.nav},x.a.createElement("div",{className:k.a.link},x.a.createElement(j.b,{className:function(e){return e.isActive?k.a.active:k.a.item},to:"/profile"},"Profile")),x.a.createElement("div",{className:k.a.link},x.a.createElement(j.b,{className:function(e){return e.isActive?k.a.active:k.a.item},to:"/messages"},"Messages")),x.a.createElement("div",{className:k.a.link},x.a.createElement(j.b,{className:function(e){return e.isActive?k.a.active:k.a.item},to:"/users"},"Users")),x.a.createElement("div",{className:k.a.link},x.a.createElement("a",{className:k.a.item,href:"#"},"Music")),x.a.createElement("div",{className:k.a.line}),x.a.createElement("div",{className:k.a.link},x.a.createElement("a",{className:k.a.settings,href:"#"},"Settings")))},y=t(10),I=t(6),A=t.n(I),C=function(e){var a="/messages/"+e.id;return x.a.createElement("div",{className:A.a.dialog+" "+A.a.active},x.a.createElement(j.b,{to:a},e.name))},F=function(e){return x.a.createElement("div",{className:A.a.message},e.message)},R=function(e){var a=x.a.createRef(),t=function(){if(0==e.newMessageText)return!1;e.sendMessage()},n=e.dialogs.map((function(e){return x.a.createElement(C,{name:e.name,key:e.id,id:e.id})})),r=e.messages.map((function(e){return x.a.createElement(F,{message:e.message,key:e.id})}));return x.a.createElement("div",{className:A.a.wrapper__messages},x.a.createElement("h2",{className:A.a.title},"Dialogs"),x.a.createElement("div",{className:A.a.dialogs},n),x.a.createElement("span",{className:A.a.stick}),x.a.createElement("div",{className:A.a.flexbox},x.a.createElement("div",{className:A.a.wrapper__messanger},x.a.createElement("div",{className:A.a.messanger},r))),x.a.createElement("div",{className:A.a.textMessage},x.a.createElement("textarea",{ref:a,onChange:function(){var n=a.current.value;a.current.addEventListener("keydown",(function(e){13===e.keyCode&&(e.preventDefault(),t())}),{once:!0}),e.updateNewMessageText(n)},value:e.newMessageText,autoFocus:!0})),x.a.createElement("div",{className:A.a.btn},x.a.createElement("div",{className:A.a.btnSend},x.a.createElement("button",{onClick:t},"Send"))))},L=Object(y.b)((function(e){return{dialogs:e.dialogsPage.dialogs,messages:e.dialogsPage.messages,newMessageText:e.dialogsPage.newMessageText}}),(function(e){return{sendMessage:function(){e({type:"SEND-MESSAGE"}),e({type:"RESET_NEW_MESSAGE_TEXT",newText:""})},updateNewMessageText:function(a){e(function(e){return{type:"UPDATE-NEW-MESSAGE-TEXT",newText:e}}(a))}}}))(R),G=t(40),D=t(41),W=t(45),H=t(44),z=t(8),X=t.n(z),B=t(16),J=t.n(B),q=function(e){for(var a=Math.ceil(e.totalUsersCount/e.pageSize),t=[],n=1;n<=a&&!(n>20);n++)t.push(n);return x.a.createElement("div",null,x.a.createElement("a",{name:"top"}),e.users.map((function(a){return x.a.createElement("div",{className:X.a.wrapper,key:a.id},x.a.createElement("div",{className:X.a.wrapper__avatar},x.a.createElement("div",null,x.a.createElement(j.b,{to:"/profile/"+a.id},x.a.createElement("img",{className:X.a.avatar,src:null!=a.photos.small?a.photos.small:J.a}))),x.a.createElement("div",{className:X.a.btn__wrapper},a.followed?x.a.createElement("button",{disabled:e.followingInProgress.some((function(e){return e===a.id})),className:X.a.btn__unfollow,onClick:function(){e.unfollow(a)}},"Unfollow"):x.a.createElement("button",{disabled:e.followingInProgress.some((function(e){return e===a.id})),className:X.a.btn__follow,onClick:function(){e.follow(a)}},"Follow"))),x.a.createElement("div",{className:X.a.wrapper__info},x.a.createElement("div",null,x.a.createElement("div",{className:X.a.nickName},a.name),x.a.createElement("div",{className:X.a.status},a.status)),x.a.createElement("div",{className:X.a.location},x.a.createElement("div",null,"USA",","),x.a.createElement("div",null,"New York"))))})),x.a.createElement("div",{className:X.a.numberPage},t.map((function(a){return x.a.createElement("div",{onClick:function(t){e.onPageChanged(a)},key:a.id},x.a.createElement("button",{className:e.currentPage===a?X.a.selectedPage:""},x.a.createElement("a",{href:"#top"},a)))}))))},Q=t(42),Z=t.n(Q),K=t(43),V=t.n(K),Y=function(e){return x.a.createElement("div",{className:V.a.loader},x.a.createElement("img",{src:Z.a}))},$=function(e){Object(W.a)(t,e);var a=Object(H.a)(t);function t(){var e;Object(G.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=a.call.apply(a,[this].concat(r))).onPageChanged=function(a){e.props.getUsers(e.props.currentPage,e.props.pageNumber)},e}return Object(D.a)(t,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return x.a.createElement(x.a.Fragment,null,x.a.createElement("span",{className:X.a.users},"Users:"),this.props.isFetching?x.a.createElement(Y,null):x.a.createElement(q,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,users:this.props.users,unfollow:this.props.unfollow,follow:this.props.follow,onPageChanged:this.onPageChanged,currentPage:this.props.currentPage,followingInProgress:this.props.followingInProgress}))}}]),t}(x.a.Component),ee=Object(y.b)((function(e){return{users:e.usersPage.users,pageSize:e.usersPage.pageSize,totalUsersCount:e.usersPage.totalUsersCount,currentPage:e.usersPage.currentPage,isFetching:e.usersPage.isFetching,followingInProgress:e.usersPage.followingInProgress}}),{setCurrentPage:function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},toggleFollowingProgress:w,getUsers:function(e,a){return function(t){t(b(!0)),l(e,a).then((function(e){t(b(!1)),t({type:"SET_USERS",users:e.items}),t({type:"SET_TOTAL_USERS_COUNT",count:e.totalCount})}))}},follow:function(e){return function(a){a(w(!0,e.id)),o(e).then((function(t){0==t.resultCode&&a(function(e){return{type:"FOLLOW",userId:e}}(e.id)),a(w(!1,e.id))}))}},unfollow:function(e){return function(a){a(w(!0,e.id)),i(e).then((function(t){0==t.resultCode&&a(function(e){return{type:"UNFOLLOW",userId:e}}(e.id)),a(w(!1,e.id))}))}}})($),ae=t(1),te=t(22),ne=t.n(te),re=t(18),se=t.n(re),le=function(){return x.a.createElement("div",null,"'Lorem ipsum dolor sit amet consectetur adipisicing elit. Fugiat deleniti ipsam veritatis.'")};var oe=function(e){return e.profile?x.a.createElement("div",{className:se.a.profile__wrapper},x.a.createElement("div",null,x.a.createElement("img",{className:se.a.profile__img,src:null!=e.profile.photos.large?e.profile.photos.large:J.a})),x.a.createElement("div",{className:se.a.profile__info},x.a.createElement("div",{className:se.a.userName},e.profile.fullName),x.a.createElement("div",{className:se.a.about__user},null!=e.profile.aboutMe?e.profile.aboutMe:x.a.createElement(le,null)))):x.a.createElement(Y,null)},ie=t(12),ce=t.n(ie),ue=t(23),_e=t.n(ue);var me=function(e){return x.a.createElement("div",null,x.a.createElement("div",{className:_e.a.wrapper},x.a.createElement("div",{className:_e.a.avatar},x.a.createElement("img",{src:null!=e.profile.photos.small?e.profile.photos.small:J.a})),x.a.createElement("div",{className:_e.a.text},e.post)))};var pe=function(e){var a=x.a.createRef(),t=function(){if(0==e.newPostText)return!1;e.addPost()},n=e.posts.map((function(a){return x.a.createElement(me,{post:a.message,profile:e.profile,key:a.profile})}));return x.a.createElement("div",{className:ce.a.wrapper},x.a.createElement("div",{className:ce.a.textarea__wrapper},x.a.createElement("textarea",{className:ce.a.textarea,onChange:function(){var n=a.current.value;a.current.addEventListener("keydown",(function(e){13===e.keyCode&&(e.preventDefault(),t())}),{once:!0}),e.updateNewPostText(n)},ref:a,value:e.newPostText})),x.a.createElement("div",{className:ce.a.btn__wrapper},x.a.createElement("button",{className:ce.a.btn,onClick:t,type:"submit"},"Post")),x.a.createElement("h2",null,"Posts:"),x.a.createElement("div",{className:ce.a.Posts},e.isFetching?n:x.a.createElement(Y,null)))},fe=Object(y.b)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText,profile:e.profilePage.profile,isFetching:e.profilePage.isFetching}}),(function(e){return{addPost:function(){e({type:"ADD-POST"}),e({type:"RESET_NEW_POST_TEXT",newText:""})},updateNewPostText:function(a){e(function(e){return{type:"UPDATE-NEW-POST-TEXT",newText:e}}(a))}}}))(pe),ge=function(e){return x.a.createElement("div",{className:ne.a.content},x.a.createElement("div",null,x.a.createElement("img",{className:ne.a.head__img,src:"https://catherineasquithgallery.com/uploads/posts/2021-02/1613162821_148-p-zheltii-fon-minimalizm-224.jpg"})),x.a.createElement("div",{className:ne.a.profile__wrapper},x.a.createElement(oe,{profile:e.profile}),x.a.createElement(fe,{profile:e.profile})))},de=Object(y.b)((function(e){return{profile:e.profilePage.profile}}),{getProfile:function(e){return function(a){c(e).then((function(e){a({type:"SET_USER_PROFILE",profile:e})}))}}})((function(e){var a=Object(ae.g)().userId;return Object(S.useEffect)((function(){e.getProfile(a)}),[]),x.a.createElement(ge,Object.assign({},e,{profile:e.profile}))})),Ee=t(13),ve=t.n(Ee);var be=function(e){return x.a.createElement("header",{className:ve.a.header__wrapper},x.a.createElement("div",{className:ve.a.header},x.a.createElement("div",{className:ve.a.logo},x.a.createElement("p",null,"Social \xb7"),x.a.createElement("p",{className:ve.a.logo__text},"\xb7 NET")),x.a.createElement("div",{className:ve.a.login__block},x.a.createElement("p",{className:ve.a.login},e.isAuth?e.login:x.a.createElement(j.b,{to:"/login"},"Login")))))},we=Object(y.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{auth:function(){return function(e){u().then((function(a){if(0===a.resultCode){var t=a.data,n=t.id,r=t.email,s=t.login;e(function(e,a,t){return{type:"SET_AUTH_USER_DATA",data:{userId:e,email:a,login:t}}}(n,r,s))}}))}}})((function(e){return Object(S.useEffect)((function(){e.auth()}),[]),x.a.createElement(be,e)}));var Ne=function(e){return x.a.createElement(x.a.Fragment,null,x.a.createElement("div",{className:"app-wrapper"},x.a.createElement(we,null),x.a.createElement(M,null),x.a.createElement("div",{className:"app-wrapper-content"},x.a.createElement(ae.c,null,x.a.createElement(ae.a,{path:"profile/:userId/",element:x.a.createElement(de,null)}),x.a.createElement(ae.a,{path:"/messages/*",element:x.a.createElement(L,null)}),x.a.createElement(ae.a,{path:"/users",element:x.a.createElement(ee,null)})))))},he=t(21);t.n(he).a.render(x.a.createElement(j.a,null,x.a.createElement(y.a,{store:O},x.a.createElement(Ne,null))),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.96fa1acc.chunk.js.map